{% extends "base.html" %}
{% load static %}

{% block title %}Create New Lead{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="mb-10">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                <div class="flex items-center space-x-4">
                    <a href="{% url 'leads:lead-list' %}" class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                        <i class="fas fa-arrow-left mr-2"></i>
                        Back to Leads
                    </a>
                    <div class="h-6 w-px bg-gray-300"></div>
                    <a href="{% url 'dashboard' %}" class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                        <i class="fas fa-tachometer-alt mr-2"></i>
                        Dashboard
                    </a>
                </div>
                <div class="text-center lg:text-right">
                    <h1 class="text-3xl font-bold text-gray-900">Create New Lead</h1>
                    <p class="text-lg text-gray-600 mt-2">Add a new lead to your pipeline</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-4 gap-8">
            <!-- Form Card -->
            <div class="xl:col-span-3">
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">Lead Information</h2>
                        <p class="text-gray-600">
                            Fill in the details below to create a new lead. All fields marked with * are required.
                        </p>
                    </div>

                    <form method="post" class="space-y-8">
                        {% csrf_token %}
                        
                        <!-- Personal Information Section -->
                        <div class="bg-gray-50 rounded-xl p-6 border border-gray-100">
                            <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                                <i class="fas fa-user mr-3 text-blue-500"></i>
                                Personal Information
                            </h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                                <!-- First Name -->
                                <div>
                                    <label for="{{ form.first_name.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        First Name *
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-user text-gray-400"></i>
                                        </div>
                                        {{ form.first_name }}
                                        {% if form.first_name.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.first_name.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.first_name.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.first_name.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>

                                <!-- Last Name -->
                                <div>
                                    <label for="{{ form.last_name.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Last Name *
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-user text-gray-400"></i>
                                        </div>
                                        {{ form.last_name }}
                                        {% if form.last_name.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.last_name.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.last_name.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.last_name.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>

                                <!-- Age -->
                                <div>
                                    <label for="{{ form.age.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Age
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-birthday-cake text-gray-400"></i>
                                        </div>
                                        {{ form.age }}
                                        {% if form.age.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.age.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.age.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.age.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>

                                <!-- Source -->
                                <div>
                                    <label for="{{ form.source.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Lead Source
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-tag text-gray-400"></i>
                                        </div>
                                        {{ form.source }}
                                        {% if form.source.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.source.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.source.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.source.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Information Section -->
                        <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                            <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                                <i class="fas fa-address-book mr-3 text-blue-500"></i>
                                Contact Information
                            </h3>
                            
                            <div class="space-y-8">
                                <!-- Email -->
                                <div>
                                    <label for="{{ form.email.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Email Address *
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-envelope text-gray-400"></i>
                                        </div>
                                        {{ form.email }}
                                        {% if form.email.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.email.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.email.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.email.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>

                                <!-- Phone Number -->
                                <div>
                                    <label for="{{ form.phone_number.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Phone Number
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-phone text-gray-400"></i>
                                        </div>
                                        {{ form.phone_number }}
                                        {% if form.phone_number.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.phone_number.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.phone_number.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.phone_number.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Assignment Section -->
                        <div class="bg-purple-50 rounded-xl p-6 border border-purple-100">
                            <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                                <i class="fas fa-users mr-3 text-purple-500"></i>
                                Assignment & Classification
                            </h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                                <!-- Agent -->
                                <div>
                                    <label for="{{ form.agent.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Assign Agent
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-user-tie text-gray-400"></i>
                                        </div>
                                        {{ form.agent }}
                                        {% if form.agent.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.agent.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.agent.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.agent.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>

                                <!-- Category -->
                                <div>
                                    <label for="{{ form.category.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                        Category
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none">
                                            <i class="fas fa-folder text-gray-400"></i>
                                        </div>
                                        {{ form.category }}
                                        {% if form.category.errors %}
                                            <div class="mt-2 text-sm text-red-600">
                                                {{ form.category.errors }}
                                            </div>
                                        {% endif %}
                                        {% if form.category.help_text %}
                                            <div class="mt-2 text-sm text-gray-500">
                                                {{ form.category.help_text }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Description Section -->
                        <div class="bg-green-50 rounded-xl p-6 border border-green-100">
                            <h3 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                                <i class="fas fa-sticky-note mr-3 text-green-500"></i>
                                Additional Notes
                            </h3>
                            
                            <div>
                                <label for="{{ form.description.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-3">
                                    Description
                                </label>
                                {{ form.description }}
                                {% if form.description.errors %}
                                    <div class="mt-2 text-sm text-red-600">
                                        {{ form.description.errors }}
                                    </div>
                                {% endif %}
                                {% if form.description.help_text %}
                                    <div class="mt-2 text-sm text-gray-500">
                                        {{ form.description.help_text }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Form Errors -->
                        {% if form.non_field_errors %}
                        <div class="bg-red-50 border border-red-200 rounded-xl p-6">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-exclamation-circle text-red-400 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold text-red-800">
                                        There was an error with your submission
                                    </h3>
                                    <div class="mt-3 text-sm text-red-700">
                                        <ul class="list-disc pl-5 space-y-2">
                                            {% for error in form.non_field_errors %}
                                            <li>{{ error }}</li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row items-center justify-between pt-8 border-t border-gray-200 space-y-4 sm:space-y-0">
                            <a href="{% url 'leads:lead-list' %}" class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                                <i class="fas fa-times mr-2"></i>
                                Cancel
                            </a>
                            <button type="submit" class="w-full sm:w-auto inline-flex items-center justify-center px-8 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105">
                                <i class="fas fa-plus mr-2"></i>
                                Create Lead
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Help Card -->
            <div class="xl:col-span-1">
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sticky top-8">
                    <div class="mb-8">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Quick Tips</h3>
                        <p class="text-gray-600">
                            Follow these guidelines to create effective leads:
                        </p>
                    </div>

                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-lightbulb text-blue-600 text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-sm font-semibold text-gray-900">Complete Information</h4>
                                <p class="text-sm text-gray-500 mt-1">Fill in as much information as possible to help agents work effectively.</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="h-8 w-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-green-600 text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-sm font-semibold text-gray-900">Valid Email</h4>
                                <p class="text-sm text-gray-500 mt-1">Ensure the email address is valid for proper communication.</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-tie text-purple-600 text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-sm font-semibold text-gray-900">Agent Assignment</h4>
                                <p class="text-sm text-gray-500 mt-1">Assign to the most suitable agent or leave unassigned for later.</p>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-folder text-yellow-600 text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-sm font-semibold text-gray-900">Category Selection</h4>
                                <p class="text-sm text-gray-500 mt-1">Choose an appropriate category to organize your leads effectively.</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 pt-6 border-t border-gray-200">
                        <h4 class="text-sm font-semibold text-gray-900 mb-4">Recent Activity</h4>
                        <div class="space-y-4">
                            <div class="flex items-center text-sm">
                                <div class="h-3 w-3 bg-green-400 rounded-full mr-3"></div>
                                <span class="text-gray-600">Last lead created: <span class="font-medium">2 hours ago</span></span>
                            </div>
                            <div class="flex items-center text-sm">
                                <div class="h-3 w-3 bg-blue-400 rounded-full mr-3"></div>
                                <span class="text-gray-600">Total leads this week: <span class="font-medium">24</span></span>
                            </div>
                            <div class="flex items-center text-sm">
                                <div class="h-3 w-3 bg-purple-400 rounded-full mr-3"></div>
                                <span class="text-gray-600">Conversion rate: <span class="font-medium">68%</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Custom styling for form fields */
input[type="text"], input[type="email"], input[type="number"], select, textarea {
    @apply block w-full pl-16 pr-6 py-4 border border-gray-300 rounded-xl leading-7 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base transition-all duration-200;
    font-size: 16px; /* Prevents zoom on mobile */
}

textarea {
    @apply pl-6;
    min-height: 140px;
    resize: vertical;
    line-height: 1.6;
}

/* Custom styling for select dropdowns */
select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 1.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 3.5rem;
}

/* Enhanced focus states */
input[type="text"]:focus, input[type="email"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    border-color: #3b82f6;
}

/* Better placeholder styling */
input::placeholder, textarea::placeholder {
    color: #9ca3af;
    font-weight: 400;
}

/* Improved icon styling */
.relative .absolute i {
    font-size: 16px;
    color: #9ca3af;
}

/* Animation for the form */
@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.bg-white {
    animation: slideInUp 0.6s ease-out;
}

/* Responsive adjustments */
@media (max-width: 1280px) {
    .sticky {
        position: static;
    }
}

@media (max-width: 768px) {
    .p-8 {
        padding: 1.5rem;
    }
    
    .space-y-8 > * + * {
        margin-top: 2rem;
    }
}
</style>
{% endblock %}
